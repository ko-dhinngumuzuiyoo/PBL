flowchart TB
    subgraph UI["ğŸ–¥ï¸ UI Layer (React)"]
        App["App.jsx<br/>ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ"]
        Cyto["CytoscapeGraph.jsx<br/>ã‚°ãƒ©ãƒ•å¯è¦–åŒ–"]
    end

    subgraph Core["âš™ï¸ Core Layer"]
        GM["GraphManager<br/>ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿ç®¡ç†"]
        LLM["LLMService<br/>APIé€£æº"]
        EMB["Embedding<br/>ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆ"]
        SIM["Similarity<br/>é¡ä¼¼åº¦è¨ˆç®—"]
        YAML["YAMLHandler<br/>YAMLå‡¦ç†"]
    end

    subgraph Data["ğŸ“ Data Layer (YAML)"]
        Config["config.yaml<br/>è¨­å®šãƒ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ"]
        Styles["styles.yaml<br/>ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©"]
        Graph["initial_graph.yaml<br/>åˆæœŸã‚°ãƒ©ãƒ•"]
    end

    subgraph External["ğŸŒ External Services"]
        Claude["Claude API"]
        OpenAI["OpenAI API"]
        Mock["Mock Service"]
        TF["Transformers.js<br/>multilingual-e5-small"]
    end

    %% UI connections
    App --> Cyto
    App --> GM
    App --> YAML
    
    %% Core connections
    GM --> LLM
    GM --> EMB
    GM --> SIM
    GM --> YAML
    
    %% LLM connections
    LLM --> Claude
    LLM --> OpenAI
    LLM --> Mock
    
    %% Embedding connections
    EMB --> TF
    
    %% Data connections
    YAML --> Config
    YAML --> Styles
    YAML --> Graph

    %% Dynamic Loop
    App -.->|"1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›"| GM
    GM -.->|"2. LLMå‘¼ã³å‡ºã—"| LLM
    LLM -.->|"3. é–¢é€£èªç”Ÿæˆ"| GM
    GM -.->|"4. åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ"| EMB
    GM -.->|"5. ã‚°ãƒ©ãƒ•æ›´æ–°"| App
    App -.->|"6. å†æç”»"| Cyto

    style UI fill:#3b82f6,color:#fff
    style Core fill:#8b5cf6,color:#fff
    style Data fill:#22c55e,color:#fff
    style External fill:#f97316,color:#fff
