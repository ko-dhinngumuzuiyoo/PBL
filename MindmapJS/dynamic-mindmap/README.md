# 動的階層マインドマップ

埋め込みベクトルベースの動的ナレッジマインドマップシステム

## 特徴

- 🧠 **埋め込みベクトル**: Transformers.jsで意味的類似度を計算
- 🔄 **動的階層**: 選択したノードを中心に階層構造が動的に生成
- 📊 **Cytoscape.js**: インタラクティブなグラフ可視化
- 🚀 **完全フロントエンド**: バックエンド不要で動作

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:3000` が自動的に開きます。

## 使い方

### 基本操作

1. **ノード選択**: グラフ上のノードをクリックして選択
2. **親ノードに設定**: 選択したノードを中心に階層を再構築
3. **非表示**: 一時的に階層から除外（復元可能）
4. **削除**: 完全に削除（復元不可）

### 類似度閾値

- スライダーで調整（40%〜90%）
- 高くすると表示される子ノードが減る
- 低くすると多くのノードが階層に含まれる

## 技術スタック

- **React** - UIフレームワーク
- **Vite** - ビルドツール
- **Cytoscape.js** - グラフ可視化ライブラリ
- **Transformers.js** - ブラウザで動作する機械学習モデル
- **Tailwind CSS** - スタイリング

## プロジェクト構造

```
dynamic-mindmap/
├── src/
│   ├── App.jsx              # メインコンポーネント
│   ├── CytoscapeGraph.jsx   # グラフ表示コンポーネント
│   ├── embedding.js         # 埋め込みベクトル生成
│   ├── similarity.js        # 類似度計算
│   ├── hierarchy.js         # 階層構築ロジック
│   ├── main.jsx            # エントリーポイント
│   └── index.css           # グローバルスタイル
├── index.html
├── package.json
└── vite.config.js
```

## 埋め込みモデル

**Xenova/multilingual-e5-small**
- 384次元の埋め込みベクトル
- 日本語対応
- 量子化版（軽量）
- 初回ロード: 約50-100MB

## 今後の拡張

### Phase 4: Claude API統合（探索機能）

新しいノードを自動生成する機能を追加予定：

```javascript
// src/claude.js（実装予定）
export async function exploreConcepts(text) {
  // Claude APIで関連概念を取得
  // 新しいノードの埋め込みを生成
  // 階層に追加
}
```

### その他の拡張案

- LocalStorageでデータ永続化
- JSONでエクスポート/インポート
- 検索機能
- フィルタリング
- カスタムノード追加UI

## デバッグ

開発中は、ブラウザのコンソール（F12）で詳細なログを確認できます：

- 🔄 モデルロード状況
- 📊 階層構築情報
- 🎯 ノード操作イベント
- ⚙️ パフォーマンス計測

## ライセンス

MIT
